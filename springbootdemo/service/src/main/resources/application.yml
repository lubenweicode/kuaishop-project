spring:
  application:
    name: demo-application

  # 数据源配置
  datasource:
    url: jdbc:mysql://localhost:3306/quickshop?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: root
    password: root123456
    driver-class-name: com.mysql.cj.jdbc.Driver

  # JPA配置（如果不用JPA可删除）
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect

  # 日志配置
  output:
    ansi:
      enabled: always

  # Redis配置（补充连接池）
  data:
    redis:
      host: localhost
      port: 6379
      password: ""
      database: 0
      timeout: 10000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1ms

# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /api/v1

# 日志配置
logging:
  level:
    root: INFO
    com.example: DEBUG
  file:
    name: logs/application.log
  pattern:
    console: "%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n%wEx"

# MyBatis-Plus配置
mybatis-plus:
  type-aliases-package: com.example.demo.entity # 改为你的实体类包名
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# JWT通用配置（生产默认开启）
jwt:
  # 7 天
  expire: 604800
  sign-key: uNivjsEvr9aUNhpKahuChoGmsjaOdYSB   # 密钥（≥32字符）
  interceptor:
    enable: true # 生产环境开启

rate-limit:
  interceptor:
    # 注意：这里是上下文内的路径（/api/v1 之后的部分），无需加 /api/v1 前缀
    include-paths:
      - /cart    # 对应实际路径：/api/v1/cart
      - /order   # 对应实际路径：/api/v1/order
    exclude-paths:
      - /auth/login    # 对应实际路径：/api/v1/auth/login
      - /auth/register # 对应实际路径：/api/v1/auth/register
      - /auth/logout   # 对应实际路径：/api/v1/auth/logout
      - /products      # 对应实际路径：/api/v1/products
      - /products/*    # 对应实际路径：/api/v1/products/*